/*
 * Created by William Wyatt
 * On Aug 30th 2017
 * Make some vector utilities.
 */
#ifndef WILLIAMS_FUN_TIME
#define WILLIAMS_FUN_TIME 1

#include <string>
#include <vector>
#include <map>
#include <iostream>
#include <cmath>

#include "lcio.h"
#include <EVENT/LCCollection.h>
#include <EVENT/MCParticle.h>

using namespace lcio;
using namespace std;

class Will{
 public:
  static vector<MCParticle *> AVAL;
  //Specific function used in prediction algorithm.
  //Finds the highest energy particle
  static map<int,double> maxEnergy(LCCollection* col, initializer_list<int> ids, vector<MCParticle*>& fs=AVAL){
    const int SIZE=ids.size();
    //double* max=new double[SIZE];
    map<int, double>* max=new map<int,double>;
    for(int i=0; i < col->getNumberOfElements(); ++i){
      MCParticle* particle=dynamic_cast<MCParticle*>(col->getElementAt(i));
      if(particle->getGeneratorStatus()!=1)continue;
      if(fs!=AVAL)fs.push_back(particle);
      int pid=particle->getPDG();
      for(auto id:ids){
	if(pid==id&&particle->getEnergy()>(*max)[id])
	  (*max)[id]=particle->getEnergy();
      }
    }
    return *max;
  }
 private:

};

#endif
